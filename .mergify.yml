# https://docs.mergify.com/configuration

---
pull_request_rules:
  - name: Automatic merge pull requests
    conditions:
      - base=main
      - or:
          - author=Hongbo-Miao
          - author=renovate[bot]
      - check-success=Lint / C, C++
      - check-success=Lint / CMake
      - check-success=Lint / Commit Message
      - check-success=Lint / CSS
      - check-success=Lint / Dockerfile
      - check-success=Lint / Go
      - check-success=Lint / JavaScript
      - check-success=Lint / Kotlin
      - check-success=Lint / Kubernetes Manifest
      - check-success=Lint / Markdown
      - check-success=Lint / Protocol Buffers
      - check-success=Lint / Python
      - check-success=Lint / QML
      - check-success=Lint / Ruby
      - check-success=Lint / Shell
      - check-success=Lint / Solidity
      - check-success=Lint / SQL
      - check-success=Lint / Terraform
      - check-success=Lint / XML
      - check-success=Lint / YAML
      - check-success=Static Type Check / Kotlin
      - check-success=Static Type Check / Python
      - check-success=Static Type Check / Terraform
      - check-success=Static Type Check / TypeScript
      - or:
          - check-success=Web | Test
          - check-skipped=Web | Test
      - or:
          - check-success=Web | End-to-End Test
          - check-skipped=Web | End-to-End Test
      - or:
          - check-success=Web | Lighthouse
          - check-skipped=Web | Lighthouse
      - or:
          - check-success=Web | Visual Test
          - check-skipped=Web | Visual Test
      - or:
          - check-success=Mobile - iOS | Test
          - check-skipped=Mobile - iOS | Test
      - or:
          - check-success=Mobile - Android | Lint
          - check-skipped=Mobile - Android | Lint
      - or:
          - check-success=Mobile - Android | Test
          - check-skipped=Mobile - Android | Test
      - or:
          - check-success=Mobile - Android | Instrumented Test
          - check-skipped=Mobile - Android | Instrumented Test
      - or:
          - check-success=Mobile - React Native | Test
          - check-skipped=Mobile - React Native | Test
      - or:
          - check-success=API - Go | Test
          - check-skipped=API - Go | Test
      - or:
          - check-success=API - Node.js | Test
          - check-skipped=API - Node.js | Test
      - or:
          - check-success=API - Node.js | Mutation Test
          - check-skipped=API - Node.js | Mutation Test
      - or:
          - check-success=API - Python | Test
          - check-skipped=API - Python | Test
      - or:
          - check-success=Prefect | Test
          - check-skipped=Prefect | Test
      - or:
          - check-success=Streaming | Test
          - check-skipped=Streaming | Test
      - or:
          - check-success=OPA | Test
          - check-skipped=OPA | Test
      - or:
          - check-success=ROS | Test
          - check-skipped=ROS | Test
      - or:
          - check-success=Rasa | Test
          - check-skipped=Rasa | Test
      - or:
          - check-success=Prometheus | Test
          - check-skipped=Prometheus | Test
      - or:
          - check-success=Grafana | End-to-End Test
          - check-skipped=Grafana | End-to-End Test
      - or:
          - check-success=Grafana | Compatibility Test
          - check-skipped=Grafana | Compatibility Test
      - or:
          - check-success=HM OPAL Client | Build
          - check-skipped=HM OPAL Client | Build
      - check-failure!=renovate/artifacts
    actions:
      review:
        type: APPROVE
      merge:
        method: squash
