---
apiVersion: v1
kind: ConfigMap
metadata:
  name: graphql-server-configmap
  namespace: hm
  labels:
    app.kubernetes.io/name: graphql-server
data:
  # graphql-server
  app_env: "production"
  port: "31800"
  grpc_server_host: "grpc-server-service.hm.svc"
  grpc_server_port: "45237"
  opa_host: "localhost"
  opa_port: "8181"
  dgraph_host: "dgraph-dgraph-alpha.hm-dgraph.svc"
  dgraph_grpc_port: "9080"
  valkey_host: "valkey.hm-valkey.svc"
  valkey_port: "6379"
  valkey_db: "0"
  valkey_password: "passw0rd"
  torch_serve_grpc_host: "torchserve-service.hm-cnn.svc"
  torch_serve_grpc_port: "7070"
  elastic_apm_service_name: "hm-graphql-server"
  open_census_agent_host: "collector.linkerd-jaeger.svc"
  open_census_agent_port: "55678"
  jwt_secret: "nnJakjEkfsPRmezBJRyyxkFUgPxUKeK8nmL3kuETVKgPkZkpUeGofioBbwuebd9X"
  s3_endpoint_url: "https://storage.us-central1.nebius.cloud"
  s3_region: "us-central1"
  s3_access_key_id: "xxx"
  s3_secret_access_key: "xxx"

  # opal-client
  opal_server_url: "http://opal-server-service.hm-opa.svc:7002"
  opal_fetch_provider_modules: "opal_common.fetcher.providers,opal_fetcher_postgres.provider"
  opal_should_report_on_data_updates: "true"
  opal_opa_health_check_policy_enabled: "true"
  opal_statistics_enabled: "true"
  opal_inline_opa_config: '{"config_file":"/data/opa/config.yaml"}'
  opal_inline_opa_log_format: "full"
  opal_log_module_exclude_list: "[]"
  opal_log_colorize: "false"
