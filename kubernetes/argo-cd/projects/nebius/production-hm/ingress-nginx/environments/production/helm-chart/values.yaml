# https://github.com/kubernetes/ingress-nginx/blob/main/charts/ingress-nginx/values.yaml
---
controller:
  ingressClassResource:
    name: nginx
    enabled: true
    default: false
    controllerValue: k8s.io/ingress-nginx
  # https://github.com/skypilot-org/skypilot/issues/8711
  # Required for SkyPilot oauth2-proxy auth-snippet to bypass auth for Bearer tokens
  allowSnippetAnnotations: true
  # https://github.com/skypilot-org/skypilot/issues/8711
  # Required for SkyPilot oauth2-proxy external auth annotations
  config:
    # https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/#annotations-risk-level
    annotations-risk-level: Critical
  replicaCount: 3
  service:
    type: LoadBalancer
    annotations:
      # https://docs.nebius.com/kubernetes/clusters/load-balancer
      nebius.com/load-balancer-type: internal
  metrics:
    enabled: true
    service:
      type: ClusterIP
  resources:
    requests:
      cpu: 10m
      memory: 100Mi
    limits:
      memory: 300Mi
  nodeSelector:
    environment: production
  tolerations:
    - key: environment
      operator: Equal
      value: production
      effect: NoSchedule
