# https://github.com/traefik/traefik-helm-chart/blob/master/traefik/values.yaml
---
image:
  registry: public.ecr.aws
  repository: docker/library/traefik
deployment:
  replicas: 3
providers:
  kubernetesIngress:
    publishedService:
      enabled: true
service:
  enabled: true
  type: LoadBalancer
  annotations:
    # https://cloud-provider-aws.sigs.k8s.io/service_controller
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
    service.beta.kubernetes.io/aws-load-balancer-internal: "true"
    service.beta.kubernetes.io/aws-load-balancer-subnets: subnet-xxxxxxxxxxxxxxxxx,subnet-xxxxxxxxxxxxxxxxx,subnet-xxxxxxxxxxxxxxxxx,subnet-xxxxxxxxxxxxxxxxx
ports:
  traefik:
    expose:
      default: true
  web:
    redirections:
      entryPoint:
        to: websecure
        scheme: https
        permanent: true
    transport:
      respondingTimeouts:
        readTimeout: 30m
  websecure:
    transport:
      respondingTimeouts:
        readTimeout: 30m
resources:
  requests:
    cpu: 20m
    memory: 100Mi
  limits:
    memory: 200Mi
globalArguments: []
# additionalArguments:
#   - --log.level=DEBUG
