[project]
name = "hm-ansible"
version = "1.0.0"
dependencies = [
  "ansible[windows]==12.0.0",
]

[dependency-groups]
dev = [
  "ansible-lint==25.9.0",
  "poethepoet==0.37.0",
]

[tool.uv]
package = false
required-version = ">=0.8.0"

[tool.poe.tasks]
ansible-galaxy-install = "ansible-galaxy install --role-file=requirements.yaml"
ansible-galaxy-upgrade = "ansible-galaxy install --role-file=requirements.yaml --force"
lint-ansible = { shell = "ansible-lint $(git ls-files '**/playbooks/**.yaml')" }
deploy-hm-macos-group = "ansible-playbook --inventory=inventories/hm_macos_group.yaml playbooks/hm_macos_group.yml"
deploy-hm-ubuntu-group = "ansible-playbook --inventory=inventories/hm_ubuntu_group.yaml playbooks/hm_ubuntu_group.yml"
deploy-hm-windows-group = "ansible-playbook --inventory=inventories/hm_windows_group.yaml playbooks/hm_windows_group.yml"
deploy-hm-rke2-group = "ansible-playbook --inventory=inventories/hm_rke2_group.yaml playbooks/hm_rke2_group.yml"
